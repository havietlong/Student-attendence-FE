<app-sidebar></app-sidebar>
<div class="container py-3 mr-5">

    <!-- Filters Section -->
    <div class="card mb-3 shadow-sm ">
        <div class="card-body py-3 px-4">
            <h5 class="mb-3 fw-bold">Filter Reports</h5>
            <div class="row g-2">
                <div class="col-md-4">
                    <label class="form-label small mb-1">Select Semester</label>
                    <select class="form-select form-select-sm" [(ngModel)]="selectedSemester">
                        <option *ngFor="let semester of semesters" [value]="semester">{{ semester }}</option>
                    </select>

                </div>
                <div class="col-md-4">
                    <label class="form-label small mb-1">Select Class</label>
                    <select class="form-select form-select-sm" [(ngModel)]="selectedClass" (change)="onFilterChange()">
                        <option *ngFor="let class of classes" [value]="class">{{ class }}</option>
                    </select>
                </div>
                <div class="col-md-4">
                    <label class="form-label small mb-1">Select Student</label>
                    <select class="form-select form-select-sm" [(ngModel)]="selectedStudent"
                        (change)="loadStudentReport()">
                        <option *ngFor="let student of students" [value]="student.studentId">
                            {{ student.fullName }}
                        </option>

                    </select>
                </div>
            </div>
        </div>
    </div>

    <!-- Charts Section -->
    <div class="row">
        <!-- Bar Chart -->
        <div class="col-lg-6 mb-3">
            <div class="card shadow-sm">
                <div class="card-body py-3 px-3">
                    <h6 class="card-title mb-3 fw-semibold">Semester Performance</h6>
                    <ng-container *ngIf="chartData && chartData.length > 0 ">
                        <ngx-charts-line-chart *ngIf="chartData && chartData.length > 0"
                            [results]="[{ name: 'Scores', series: chartData }]" [xAxis]="true" [yAxis]="true"
                            [legend]="false" [showXAxisLabel]="true" [showYAxisLabel]="true" [xAxisLabel]="'Subjects'"
                            [yAxisLabel]="'Scores'" [autoScale]="true">
                        </ngx-charts-line-chart>

                    </ng-container>
                </div>
            </div>
        </div>

        <!-- Pie Chart -->
        <div class="col-lg-6 mb-3">
            <div class="card shadow-sm">
                <div class="card-body py-3 px-3">
                    <h6 class="card-title mb-3 fw-semibold">Attendance Overview</h6>
                    <div style="height: 300px;">
                        <ngx-charts-pie-chart *ngIf="attendanceData.length > 0" [results]="attendanceData"
                            [legend]="true" [labels]="true">
                        </ngx-charts-pie-chart>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>